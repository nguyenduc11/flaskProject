window.userSession=window.userSession||{async init(){if(window.userSession.initialized)return;const e=new URLSearchParams(window.location.search),o=window.userSession.__getStorage("__session.data"),n=window.userSession.__getStorage("__session.timestamps"),s=window.userSession.getCookie("optimizelyEndUserId"),t=["url","jmp","tck","ad_id","ad_id_set","utm_campaign","utm_content","utm_source","utm_term","utm_medium","utm_adid","utm_ad","gclid","form_url","utm_ad_campaign_id","ad_campaign_id","utm_ad_id","ad_id","utm_ad_set_id","ad_set_id","fbclid","flex_field","adgroup"],i=Date.now();for(const s of t)e.has(s)&&(o[s]=e.get(s),n[s]=i);s&&!o.optimizelyEndUserId&&(o.optimizelyEndUserId=s);const r=window.userSession.__getReferrer();r&&!o.referrer&&(o.referrer=o.external_referrer=r,n.referrer=n.external_referrer=i),o.loggedIn=!1,o.sessionId=window.userSession.generateId(i),window.userSession.setCookie("__session.data",JSON.stringify(o),null,"/","mongodb.com"),window.userSession.setCookie("__session.timestamps",JSON.stringify(n),null,"/","mongodb.com"),window.userSession.initialized=!0;try{(await fetch("https://cloud.mongodb.com/user/shared",{credentials:"include"})).ok&&(o.loggedIn=!0,window.userSession.setCookie("__session.data",JSON.stringify(o),null,"/","mongodb.com"))}catch(e){}window.userSession.gaLoaded(()=>{window.ga(e=>{o.ga_client_id=e.get("clientId"),window.userSession.setCookie("__session.data",JSON.stringify(o),null,"/","mongodb.com")})})},generateId:e=>`${"seid-"+e}-${(e*Math.random()).toString(16).replace(".","")}${Math.random().toString(16).substr(2)}`,gaLoaded(e){if(window.ga)return e();setTimeout(window.userSession.gaLoaded,500,e)},setCookie(e,o,n,s,t,i){s||(s="/");if(!e||/^(?:expires|max-age|path|domain|secure)$/i.test(e))return!1;return document.cookie=`${encodeURIComponent(e)}=${encodeURIComponent(o)}${t?"; domain="+t:""}${s?"; path="+s:""}${i?"; secure":""}`,!0},getCookie:e=>e&&decodeURIComponent(document.cookie.replace(new RegExp(`(?:(?:^|.*;)\\s*${encodeURIComponent(e).replace(/[-.+*]/g,"\\$&")}\\s*\\=\\s*([^;]*).*$)|^.*$`),"$1"))||void 0,__getStorage(e){try{return JSON.parse(window.userSession.getCookie(e))||JSON.parse(window.userSession.getCookie(e))||{}}catch(e){return{}}},__getReferrer(){let e,o={origin:""};try{o=new URL(document.referrer)}catch(e){}try{e=window.optimizely.get("state").getRedirectInfo().referrer,e&&(o=new URL(e))}catch(e){}return o.origin.includes("mongodb.com")&&document.referrer.includes("localhost")?"":!1===o.origin.includes("mongodb.com")?e||document.referrer:""},get(){const e=window.userSession.__getStorage("__session.data"),o=window.userSession.__getStorage("__session.timestamps");for(const n of Object.keys(o)){const s=o[n]+864e5;Date.now()>s&&delete e[n]}return e}},window.userSession.init();const e=async(e,o)=>{const n=new window.Request(e,{method:"HEAD",...o});try{await window.fetch(n)}catch(e){return!0}return!1};(async()=>{const o=await e("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",{mode:"no-cors"});window.sessionStorage.setItem("adblockEnabled",o)})();(async()=>{const o=await e("https://api.segment.io/v1/p",{mode:"no-cors"});window.sessionStorage.setItem("segmentLoaded",!1===o)})();const o=/[-.+*]/g,n=e=>!!e&&new RegExp(`(?:^|;\\s*)${encodeURIComponent(e).replace(o,"\\$&")}\\s*\\=`).test(document.cookie);["__adroll","__adroll_consent_params","__adroll_fpc","__adroll_shared","__ar_v4","_te_","_biz_dfsA","_biz_kvpA","_biz_nA","_biz_pendingA","_biz_sid","_biz_uid","_BUID","ARRAffinity","_cb","_cb_ls","_cb_svref","_chartbeat2"].map(e=>{((e,o="/",s)=>{n(e)&&(document.cookie=`${encodeURIComponent(e)}=; expires=Thu, 01 Jan 1970 00:00:00 GMT${s?"; domain="+s:""}${o?"; path="+o:""}`)})(e)});
//# sourceMappingURL=import-run.d5b02fd3.js.map
